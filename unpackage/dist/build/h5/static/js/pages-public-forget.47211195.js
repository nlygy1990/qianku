(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-public-forget"],{5140:function(t,e,i){"use strict";i.r(e);var n=i("6b61"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},"5f6c":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"input-content"},[i("v-uni-view",{staticClass:"tishi"},[t._v("为了您的账号安全，请先验证再进行下一步操作")]),i("v-uni-view",{staticClass:"input-item"},[i("v-uni-input",{attrs:{type:"text",value:t.mobile,placeholder:"请输入已注册的手机号","placeholder-style":"color:#cbcbcb",maxlength:"11","data-key":"mobile"},on:{input:function(e){e=t.$handleEvent(e),t.inputChange(e)}}})],1),i("v-uni-view",{staticClass:"input-item"},[i("v-uni-input",{attrs:{type:"text",value:t.imgcode,placeholder:"请输入图形验证码","placeholder-style":"color:#cbcbcb","placeholder-class":"input-empty",maxlength:"4","data-key":"imgcode"},on:{input:function(e){e=t.$handleEvent(e),t.inputChange(e)}}}),i("v-uni-view",{staticClass:"canvas-img-code",on:{click:function(e){e=t.$handleEvent(e),t.refresh(e)}}},[i("v-uni-canvas",{style:{width:t.width+"px",height:t.height+"px"},attrs:{"canvas-id":"imgcanvas"},on:{error:function(e){e=t.$handleEvent(e),t.canvasIdErrorCallback(e)}}})],1),i("v-uni-view",{staticClass:"kabuqing",on:{click:function(e){e=t.$handleEvent(e),t.refresh(e)}}},[t._v("换一张")])],1),i("v-uni-view",{staticClass:"input-item"},[i("v-uni-input",{attrs:{type:"number",value:t.phonecode,placeholder:"请输入手机验证码","placeholder-style":"color:#cbcbcb",maxlength:"6","data-key":"phonecode"},on:{input:function(e){e=t.$handleEvent(e),t.inputChange(e)},confirm:function(e){e=t.$handleEvent(e),t.toNext(e)}}}),i("v-uni-text",{on:{click:function(e){e=t.$handleEvent(e),t.getPhoneCode(e)}}},[t._v(t._s(t.getcode))])],1),i("v-uni-button",{staticClass:"quxiao",on:{click:function(e){e=t.$handleEvent(e),t.quxiao(e)}}},[t._v("取消")]),i("v-uni-button",{staticClass:"confirm-btn",attrs:{disabled:t.logining},on:{click:function(e){e=t.$handleEvent(e),t.toNext(e)}}},[t._v("下一步")])],1)],1)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},"6b61":function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("6c7b");var a=n(i("e814")),o=n(i("cebc")),s=i("2f62"),c={data:function(){return{mobile:"",imgcode:"",phonecode:"",phonetoken:"",logining:!1,realname:"",token:"",checked:!1,scode:!1,getcode:"获取验证码",width:70,height:30}},onLoad:function(){var t=this;setTimeout(function(){t.init()},100)},methods:(0,o.default)({},(0,s.mapMutations)(["bindCn"]),{inputChange:function(t){var e=t.currentTarget.dataset.key;this[e]=t.detail.value},quxiao:function(){uni.redirectTo({url:"login"})},toNext:function(){var t=this;return this.logining=!0,this.mobile?this.imgcode?this.phonecode?(uni.showLoading({title:"正在验证",mask:!0}),void uni.request({url:uni.getStorageSync("hostname")+"?action=index/login/forgetyz",data:{phone:this.mobile,imgcode:this.imgcode,code:this.phonecode,token:this.phonetoken},method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){uni.hideLoading();var i=e.data;if(0==i.code){uni.showToast({title:i.msg,icon:"success",mask:!0,duration:3e3}),uni.setStorageSync("cbe_forgetToken",i.token);setTimeout(function(){uni.redirectTo({url:"changepwd"})},3e3)}else uni.showToast({title:i.msg,icon:"none"}),t.logining=!1}})):(uni.showToast({title:"请填写手机验证码",icon:"none"}),this.logining=!1,!1):(uni.showToast({title:"请填写图形验证码",icon:"none"}),this.logining=!1,!1):(uni.showToast({title:"请填写手机号码",icon:"none"}),this.logining=!1,!1)},getPhoneCode:function(t){var e=this;if(0==this.scode){var i=/^1[0-9]{10,10}$/;if(i.test(this.mobile)){if(!this.imgcode)return uni.showToast({title:"图形验证码不能为空",icon:"none"}),!1;if(this.imgcode!=this.imgyzcode)return uni.showToast({title:"图形验证码错误",icon:"none"}),this.logining=!1,!1;var n=120;this.scode=!0,this.timer=setInterval(function(){n-=1,"0"==n?(e.getcode="获取验证码",n=120,e.scode=!1,clearInterval(e.timer)):e.getcode="重新获取("+n+"s)"},1e3),uni.showLoading({title:"正在获取",mask:!0}),uni.request({url:uni.getStorageSync("hostname")+"?action=index/common/getphonecode",data:{phone:this.mobile,use:"forget"},method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){uni.hideLoading();var i=t.data;0==i.code?(uni.showToast({title:i.msg,icon:"success",mask:!0,duration:3e3}),e.phonetoken=i.token):(uni.showToast({title:i.msg,icon:"none"}),e.getcode="获取验证码",n=120,e.scode=!1,clearInterval(e.timer))},fail:function(t){uni.showToast({title:"网络连接超时，请检查您的网络",icon:"none"});setTimeout(function(){e.getcode="获取验证码",n=120,e.scode=!1,clearInterval(e.timer)},1e3)}})}else uni.showToast({title:"手机号码格式错误",icon:"none"})}},init:function(){var t=uni.createCanvasContext("imgcanvas",this),e=this.width,i=this.height;t.setFillStyle("white"),t.setLineWidth(5),t.fillRect(0,0,e,i);for(var n=["A","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","U","V","W","S","Y","Z","1","2","3","4","5","6","7","8","9","0"],o="",s=0;s<4;s++){var c=n[this.rn(0,n.length)],r=this.rn(-30,30);t.setFontSize(18),t.setTextBaseline("top"),t.setFillStyle(this.rc(80,150)),t.save(),t.translate(15*s+15,(0,a.default)(i/1.5)),t.rotate(r*Math.PI/180),t.fillText(c,-10,-15),t.restore(),o+=c}uni.setStorage({key:"imgcode",data:o}),this.imgyzcode=o;for(s=0;s<40;s++)t.beginPath(),t.arc(this.rn(0,e),this.rn(0,i),1,0,2*Math.PI),t.closePath(),t.setFillStyle(this.rc(150,200)),t.fill();t.draw()},rc:function(t,e){var i=this.rn(t,e),n=this.rn(t,e),a=this.rn(t,e);return"rgb("+i+","+n+","+a+")"},rn:function(t,e){return(0,a.default)(Math.random()*(t-e))+e},refresh:function(){this.init()},canvasIdErrorCallback:function(t){console.error(t.detail.errMsg)}})};e.default=c},"6c7b":function(t,e,i){var n=i("5ca1");n(n.P,"Array",{fill:i("36bd")}),i("9c6c")("fill")},"7af6":function(t,e,i){"use strict";var n=i("c78c"),a=i.n(n);a.a},"9c20":function(t,e,i){"use strict";i.r(e);var n=i("5f6c"),a=i("5140");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("7af6");var s=i("2877"),c=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"36fa0a77",null);e["default"]=c.exports},"9d83":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */uni-page-body[data-v-36fa0a77]{background:#fff}.tishi[data-v-36fa0a77]{width:%?750?%;font-size:%?26?%;color:#37b0c9;text-align:center;background:#f9f9f9;height:%?80?%;line-height:%?80?%;margin-left:%?-30?%\n  /* position: absolute;\n\tleft:0upx; */}.tishia[data-v-36fa0a77]{width:%?690?%;font-size:%?24?%;color:#343434;text-align:left;height:%?80?%;line-height:%?80?%}.tishib[data-v-36fa0a77]{width:%?690?%;font-size:%?30?%;color:#343434;text-align:left;height:%?80?%;line-height:%?80?%}.container[data-v-36fa0a77]{position:relative;width:100vw;height:100vh;overflow:hidden;background:#fff}.wrapper[data-v-36fa0a77]{position:relative;z-index:90;background:#fff;padding-bottom:%?40?%}.input-content[data-v-36fa0a77]{padding:%?40?% %?30?%;position:relative}.input-item[data-v-36fa0a77]{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:%?100?%;border-radius:4px;margin-bottom:%?10?%;border-bottom:%?1?% solid #eaeaea}.input-item[data-v-36fa0a77]:last-child{margin-bottom:0}.input-item .tit[data-v-36fa0a77]{height:%?50?%;line-height:%?56?%;font-size:%?26?%;color:#606266}.input-item uni-input[data-v-36fa0a77]{height:%?50?%;font-size:%?30?%;color:#303133;width:100%}.input-item uni-text[data-v-36fa0a77]{position:absolute;right:%?0?%;font-size:%?30?%;color:#b2b2b2;border:%?1?% solid #b2b2b2;padding:%?8?% %?30?%;border-radius:%?50?%;z-index:999}.input-item .canvas-img-code[data-v-36fa0a77]{position:absolute;right:%?120?%;z-index:999}.input-item .canvas-img-code uni-canvas[data-v-36fa0a77]{border:%?1?% solid #eaeaea;background:#eaeaea}.input-item .kabuqing[data-v-36fa0a77]{position:absolute;right:0;z-index:999;color:#008ab0;font-size:%?30?%}.quxiao[data-v-36fa0a77]{position:absolute;left:%?30?%;width:%?320?%;height:%?76?%;line-height:%?76?%;border-radius:50px;margin-top:%?70?%;background:#fff;color:#008ab0;font-size:%?32?%;border:%?1?% solid #008ab0}.quxiao[data-v-36fa0a77]:after{border-radius:100px}.confirm-btn[data-v-36fa0a77]{position:absolute;right:%?30?%;width:%?320?%;height:%?76?%;line-height:%?76?%;border-radius:50px;margin-top:%?70?%;background:#008ab0;color:#fff;font-size:%?32?%}.confirm-btn[data-v-36fa0a77]:after{border-radius:100px}body.?%PAGE?%[data-v-36fa0a77]{background:#fff}',""])},c78c:function(t,e,i){var n=i("9d83");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("53ab3bcc",n,!0,{sourceMap:!1,shadowMode:!1})}}]);