(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-public-register"],{"103c":function(t,i,e){"use strict";e.r(i);var n=e("e4cd"),o=e.n(n);for(var a in n)"default"!==a&&function(t){e.d(i,t,function(){return n[t]})}(a);i["default"]=o.a},"18b2":function(t,i,e){"use strict";e.r(i);var n=e("f3f4"),o=e("103c");for(var a in o)"default"!==a&&function(t){e.d(i,t,function(){return o[t]})}(a);e("c6ef");var s=e("2877"),c=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"5a23c4c4",null);i["default"]=c.exports},"6c7b":function(t,i,e){var n=e("5ca1");n(n.P,"Array",{fill:e("36bd")}),e("9c6c")("fill")},9960:function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */uni-page-body[data-v-5a23c4c4]{background:#fff}.clear[data-v-5a23c4c4]{clear:both}.tishi[data-v-5a23c4c4]{width:%?690?%;font-size:%?24?%;color:#343434;line-height:%?100?%}.container[data-v-5a23c4c4]{position:relative;width:100vw;height:100vh;overflow:hidden;background:#fff}.wrapper[data-v-5a23c4c4]{position:relative;z-index:90;background:#fff;padding-bottom:%?40?%}.input-content[data-v-5a23c4c4]{padding:%?40?% %?30?%}.input-item[data-v-5a23c4c4]{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:%?100?%;border-radius:4px;margin-bottom:%?10?%;border-bottom:%?1?% solid #eaeaea}.input-item[data-v-5a23c4c4]:last-child{margin-bottom:0}.input-item .tit[data-v-5a23c4c4]{height:%?50?%;line-height:%?56?%;font-size:%?26?%;color:#606266}.input-item uni-input[data-v-5a23c4c4]{height:%?50?%;font-size:%?30?%;color:#303133;width:100%}.input-item .code[data-v-5a23c4c4]{position:absolute;right:%?0?%;font-size:%?30?%;color:#b2b2b2;border:%?1?% solid #b2b2b2;padding:%?8?% %?30?%;border-radius:%?50?%;z-index:999}.input-item .uu[data-v-5a23c4c4]{position:absolute;right:0;font-size:%?26?%;color:#08b000}.input-item .uuu[data-v-5a23c4c4]{position:absolute;right:0;font-size:%?26?%;color:#b0002f}.input-item .canvas-img-code[data-v-5a23c4c4]{position:absolute;right:%?120?%;z-index:999}.input-item .canvas-img-code uni-canvas[data-v-5a23c4c4]{border:%?1?% solid #eaeaea;background:#eaeaea}.input-item .uni-icon[data-v-5a23c4c4]{position:absolute;right:%?20?%;font-size:%?40?%;z-index:999;color:#008ab0}.input-item .uni-icon uni-image[data-v-5a23c4c4]{width:%?40?%;height:%?40?%}.input-item .kabuqing[data-v-5a23c4c4]{position:absolute;right:0;z-index:999;color:#008ab0;font-size:%?30?%}.input-item .kk[data-v-5a23c4c4]{width:%?40?%;height:%?40?%;position:absolute;left:%?0?%;z-index:99}.input-item .uuua[data-v-5a23c4c4]{position:absolute;left:%?40?%;font-size:%?28?%;color:#666;height:%?40?%;padding-left:%?30?%;padding-top:%?14?%}.input-item .uuua uni-text[data-v-5a23c4c4]{color:#008ab0}.confirm-btn[data-v-5a23c4c4]{width:%?690?%;height:%?76?%;line-height:%?76?%;border-radius:50px;margin-top:%?30?%;background:#008ab0;color:#fff;font-size:%?32?%}.confirm-btn[data-v-5a23c4c4]:after{border-radius:100px}.forget-section[data-v-5a23c4c4]{font-size:%?30?%;color:#008ab0;text-align:center;margin-top:%?40?%}.forget-section[data-v-5a23c4c4] :first-child{float:left;padding-left:%?30?%}.forget-section[data-v-5a23c4c4] :last-child{float:right;padding-right:%?30?%}body.?%PAGE?%[data-v-5a23c4c4]{background:#fff}',""])},be5b:function(t,i,e){var n=e("9960");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=e("4f06").default;o("19d74f1a",n,!0,{sourceMap:!1,shadowMode:!1})},c6ef:function(t,i,e){"use strict";var n=e("be5b"),o=e.n(n);o.a},e4cd:function(t,i,e){"use strict";var n=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("6c7b");var o=n(e("e814"));e("3b2b");var a=n(e("cebc")),s=e("2f62"),c={data:function(){return{keyong:0,password:"",repassword:"",showPassword:!0,mobile:"",imgcode:"",imgyzcode:"",phonecode:"",phonetoken:"",showPassworda:!0,scode:!1,getcode:"获取验证码",logining:!1,usertoken:"",bkts:"如果您已获得如新CN卡号，可点击绑定您的账号，成为如新海外购平台的推广商，获得专属产品分享链接及分享红利。",width:70,height:30,uid:0,xieyi:!0}},onLoad:function(t){var i=this;setTimeout(function(){i.init()},100),this.usertoken=uni.getStorageSync("cbe_retoken"),t.uid&&(this.uid=t.uid)},onShow:function(){uni.getStorageSync("cbe_token")&&uni.switchTab({url:"/pages/index/index"})},methods:(0,a.default)({},(0,s.mapMutations)(["register","login"]),{inputChange:function(t){var i=t.currentTarget.dataset.key;this[i]=t.detail.value},toXieyi:function(){uni.navigateTo({url:"/pages/public/onepage?id=16"})},checkboxChange:function(t){this.xieyi=!this.xieyi},inputChangm:function(t){var i=this,e=t.detail.value;this.mobile=e;var n=/^1[0-9]{10,10}$/;n.test(e)?uni.request({url:uni.getStorageSync("hostname")+"?action=index/login/checkphone",data:{phone:e},method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var e=t.data;0==e.code?i.keyong=1:i.keyong=2}}):this.keyong=0},changePassword:function(){this.showPassword=!this.showPassword},changePassworda:function(){this.showPassworda=!this.showPassworda},toLogin:function(){this.usertoken?uni.redirectTo({url:"dsflogin"}):uni.navigateBack({delta:1})},toRegiser:function(){var t=this;this.logining=!0;var i=/^1[0-9]{10,10}$/;return this.mobile?i.test(this.mobile)?this.imgcode?this.imgcode!=this.imgyzcode?(uni.showToast({title:"图形验证码错误",icon:"none"}),this.logining=!1,!1):this.phonecode?this.password?this.CheckPassWord(this.password)?this.repassword?this.password!=this.repassword?(uni.showToast({title:"两次密码不一致",icon:"none"}),this.logining=!1,!1):this.xieyi?(uni.showLoading({title:"正在提交",mask:!0}),void uni.request({url:uni.getStorageSync("hostname")+"?action=index/login/register",data:{phone:this.mobile,imgcode:this.imgcode,code:this.phonecode,token:this.phonetoken,password:this.password,repassword:this.repassword,usertoken:this.usertoken,uid:this.uid},method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(i){uni.hideLoading();var e=i.data;if(0==e.code){uni.setStorageSync("cbe_token",e.token),t.phonetoken="",uni.showToast({title:e.msg,icon:"success",mask:!0,duration:3e3}),t.login(e.data);var n=t.bkts;setTimeout(function(){uni.showModal({title:"推广商申请",cancelText:"跳过",confirmText:"绑定",content:n,success:function(t){t.confirm?uni.redirectTo({url:"bindCn"}):t.cancel&&uni.switchTab({url:"../user/user"})}})},2e3)}else uni.showToast({title:e.msg,icon:"none"}),t.logining=!1}})):(uni.showToast({title:"请先同意注册协议",icon:"none"}),this.logining=!1,!1):(uni.showToast({title:"请再次确认密码",icon:"none"}),this.logining=!1,!1):(uni.showToast({title:"密码格式不正确",icon:"none"}),this.logining=!1,!1):(uni.showToast({title:"密码不能为空",icon:"none"}),this.logining=!1,!1):(uni.showToast({title:"手机验证码不能为空",icon:"none"}),this.logining=!1,!1):(uni.showToast({title:"图形验证码不能为空",icon:"none"}),this.logining=!1,!1):(uni.showToast({title:"手机号码格式错误",icon:"none"}),this.logining=!1,!1):(uni.showToast({title:"手机号码不能为空",icon:"none"}),this.logining=!1,!1)},getPhoneCode:function(t){var i=this;if(0==this.scode){var e=/^1[0-9]{10,10}$/;if(e.test(this.mobile)){if(!this.imgcode)return uni.showToast({title:"图形验证码不能为空",icon:"none"}),!1;if(this.imgcode!=this.imgyzcode)return uni.showToast({title:"图形验证码错误",icon:"none"}),this.logining=!1,!1;var n=120;this.scode=!0,this.timer=setInterval(function(){n-=1,"0"==n?(i.getcode="获取验证码",n=120,i.scode=!1,clearInterval(i.timer)):i.getcode="重新获取("+n+"s)"},1e3),uni.showLoading({title:"正在获取",mask:!0}),uni.request({url:uni.getStorageSync("hostname")+"?action=index/common/getphonecode",data:{phone:this.mobile,use:"register"},method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){uni.hideLoading();var e=t.data;if(0==e.code)uni.showToast({title:e.msg,icon:"success",mask:!0,duration:3e3}),console.log(e.msg),i.phonetoken=e.token;else{uni.showToast({title:e.msg,icon:"none"});setTimeout(function(){i.getcode="获取验证码",n=120,i.scode=!1,clearInterval(i.timer)},1e3)}},fail:function(t){uni.showToast({title:"网络连接超时，请检查您的网络",icon:"none"});setTimeout(function(){i.getcode="获取验证码",n=120,i.scode=!1,clearInterval(i.timer)},1e3)}})}else uni.showToast({title:"手机号码格式错误",icon:"none"})}},CheckPassWord:function(t){var i=t;if(null==i||i.length<6||i.length>20)return!1;var e=new RegExp(/^[0-9A-Za-z_]+$/);if(!e.test(i))return!1;var n=new RegExp(/[A-Za-z_].*[0-9]|[0-9].*[A-Za-z_]/);return!!n.test(i)},init:function(){var t=uni.createCanvasContext("imgcanvas",this),i=this.width,e=this.height;t.setFillStyle("white"),t.setLineWidth(5),t.fillRect(0,0,i,e);for(var n=["A","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","U","V","W","S","Y","Z","1","2","3","4","5","6","7","8","9","0"],a="",s=0;s<4;s++){var c=n[this.rn(0,n.length)],r=this.rn(-30,30);t.setFontSize(18),t.setTextBaseline("top"),t.setFillStyle(this.rc(80,150)),t.save(),t.translate(15*s+15,(0,o.default)(e/1.5)),t.rotate(r*Math.PI/180),t.fillText(c,-10,-15),t.restore(),a+=c}uni.setStorage({key:"imgcode",data:a}),this.imgyzcode=a;for(s=0;s<40;s++)t.beginPath(),t.arc(this.rn(0,i),this.rn(0,e),1,0,2*Math.PI),t.closePath(),t.setFillStyle(this.rc(150,200)),t.fill();t.draw()},rc:function(t,i){var e=this.rn(t,i),n=this.rn(t,i),o=this.rn(t,i);return"rgb("+e+","+n+","+o+")"},rn:function(t,i){return(0,o.default)(Math.random()*(t-i))+i},refresh:function(){this.init()},canvasIdErrorCallback:function(t){console.error(t.detail.errMsg)}})};i.default=c},f3f4:function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"container"},[e("v-uni-view",{staticClass:"input-content"},[e("v-uni-view",{staticClass:"input-item"},[e("v-uni-input",{attrs:{type:"text",value:t.mobile,placeholder:"请输入手机号码","placeholder-style":"color:#cbcbcb",maxlength:"11","data-key":"mobile"},on:{input:function(i){i=t.$handleEvent(i),t.inputChangm(i)}}}),1==t.keyong?e("v-uni-view",{staticClass:"uu"},[t._v("√ 可用")]):t._e(),2==t.keyong?e("v-uni-view",{staticClass:"uuu"},[t._v("× 该手机号已注册")]):t._e()],1),e("v-uni-view",{staticClass:"input-item"},[e("v-uni-input",{attrs:{type:"text",value:t.imgcode,placeholder:"请输入图形验证码","placeholder-style":"color:#cbcbcb","placeholder-class":"input-empty",maxlength:"4","data-key":"imgcode"},on:{input:function(i){i=t.$handleEvent(i),t.inputChange(i)}}}),e("v-uni-view",{staticClass:"canvas-img-code",on:{click:function(i){i=t.$handleEvent(i),t.refresh(i)}}},[e("v-uni-canvas",{style:{width:t.width+"px",height:t.height+"px"},attrs:{"canvas-id":"imgcanvas"},on:{error:function(i){i=t.$handleEvent(i),t.canvasIdErrorCallback(i)}}})],1),e("v-uni-view",{staticClass:"kabuqing",on:{click:function(i){i=t.$handleEvent(i),t.refresh(i)}}},[t._v("换一张")])],1),e("v-uni-view",{staticClass:"input-item"},[e("v-uni-input",{attrs:{type:"number",value:t.phonecode,placeholder:"请输入手机验证码","placeholder-style":"color:#cbcbcb","placeholder-class":"input-empty",maxlength:"6","data-key":"phonecode"},on:{input:function(i){i=t.$handleEvent(i),t.inputChange(i)}}}),e("v-uni-text",{staticClass:"code",on:{click:function(i){i=t.$handleEvent(i),t.getPhoneCode(i)}}},[t._v(t._s(t.getcode))])],1),e("v-uni-view",{staticClass:"input-item"},[e("v-uni-input",{attrs:{type:"text",value:t.password,placeholder:"请设置密码,6~20位数","placeholder-style":"color:#cbcbcb","placeholder-class":"input-empty",maxlength:"20",password:t.showPassword,"data-key":"password"},on:{input:function(i){i=t.$handleEvent(i),t.inputChange(i)}}}),e("v-uni-view",{staticClass:"uni-icon",on:{click:function(i){i=t.$handleEvent(i),t.changePassword(i)}}},[e("v-uni-image",{attrs:{src:t.showPassword?"../../static/yanjing.png":"../../static/yanjingact.png",mode:""}})],1)],1),e("v-uni-view",{staticClass:"input-item"},[e("v-uni-input",{attrs:{type:"text",value:t.repassword,placeholder:"请再次确认密码","placeholder-style":"color:#cbcbcb","placeholder-class":"input-empty",maxlength:"20",password:t.showPassworda,"data-key":"repassword"},on:{input:function(i){i=t.$handleEvent(i),t.inputChange(i)},confirm:function(i){i=t.$handleEvent(i),t.toRegiser(i)}}}),e("v-uni-view",{staticClass:"uni-icon",on:{click:function(i){i=t.$handleEvent(i),t.changePassworda(i)}}},[e("v-uni-image",{attrs:{src:t.showPassworda?"../../static/yanjing.png":"../../static/yanjingact.png",mode:""}})],1)],1),e("v-uni-view",{staticClass:"tishi"},[t._v("密码长度须为6-20非纯数字，可包含字母、数字或下划线")]),e("v-uni-view",{staticClass:"clear"}),e("v-uni-view",{staticClass:"input-item",staticStyle:{"border-bottom":"none"}},[e("v-uni-view",{staticClass:"kk",on:{click:function(i){i=t.$handleEvent(i),t.checkboxChange(i)}}},[e("v-uni-label",[e("v-uni-checkbox",{attrs:{value:"xieyi",color:"#008ab0",checked:t.xieyi}})],1)],1),e("v-uni-view",{staticClass:"uuua"},[t._v("已阅读并同意"),e("v-uni-text",{on:{click:function(i){i=t.$handleEvent(i),t.toXieyi(i)}}},[t._v("《如新海外购用户协议》")])],1)],1)],1),e("v-uni-button",{staticClass:"confirm-btn",attrs:{disabled:t.logining},on:{click:function(i){i=t.$handleEvent(i),t.toRegiser(i)}}},[t._v("注册")]),e("v-uni-view",{staticClass:"forget-section"},[e("v-uni-text",{on:{click:function(i){i=t.$handleEvent(i),t.toLogin(i)}}},[t._v("已有账号？立即登录")])],1)],1)},o=[];e.d(i,"a",function(){return n}),e.d(i,"b",function(){return o})}}]);