(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-bank-bindbank"],{2569:function(t,e,a){"use strict";var n=a("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c5f6"),a("4917"),a("3b2b");var i=n(a("e814")),r=(a("2f62"),{data:function(){return{index:0,bankcard:"",bank:"",bankrealname:"",bankidcard:"",token:"",kaika:!1,memberInfo:[],array:["中国银行","中国农业银行"]}},onShow:function(){if(uni.getStorageSync("cbe_token"))this.token=uni.getStorageSync("cbe_token"),this.getMemberInfo();else{uni.showToast({title:"未登录或无权限",icon:"none"});setTimeout(function(){uni.navigateBack({delta:1})},1e3)}},methods:{navTo:function(t){uni.navigateTo({url:t})},bindPickerChange:function(t){this.index=t.target.value;var e=t.target.value;this.bank=this.array[e],this.kaika=!0},inputChange:function(t){var e=t.currentTarget.dataset.key;this[e]=t.detail.value},confirm:function(){this.bankcard?this.checkBankno(this.bankcard)?this.bank?this.bankrealname?this.bankidcard?this.checkIdcard(this.bankidcard)?(uni.showLoading({title:"正在处理",mask:!0}),uni.request({url:uni.getStorageSync("hostname")+"?action=index/member/bankPost",data:{bankcard:this.bankcard,bank:this.bank,bankrealname:this.bankrealname,token:this.token,bankidcard:this.bankidcard},method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){uni.hideLoading();var e=t.data;if(0==e.code){uni.showToast({title:e.msg,icon:"success",mask:!0,duration:3e3});setTimeout(function(){uni.navigateBack({delta:1})},2e3)}else uni.showToast({title:e.msg,icon:"none"})}})):this.$api.msg("身份证号码格式不正确"):this.$api.msg("请输入开卡人身份证号码"):this.$api.msg("请输入开卡人姓名"):this.$api.msg("请选择开卡行"):this.$api.msg("银行卡号格式不正确"):this.$api.msg("请输入银行卡号")},getMemberInfo:function(){var t=this;uni.request({url:uni.getStorageSync("hostname")+"?action=index/member/info",data:{token:uni.getStorageSync("cbe_token")},method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){var a=e.data;0==a.code&&(t.bankcard=a.one.bankcard,t.bank=a.one.bank,t.bankrealname=a.one.bankrealname,a.one.bankidcard&&(t.kaika=!0,t.bankidcard=a.one.bankidcard))}})},checkBankno:function(t){for(var e=t.substr(t.length-1,1),a=t.substr(0,t.length-1),n=[],r=a.length-1;r>-1;r--)n.push(a.substr(r,1));for(var s=[],o=[],d=[],u=0;u<n.length;u++)(u+1)%2==1?2*(0,i.default)(n[u])<9?s.push(2*(0,i.default)(n[u])):o.push(2*(0,i.default)(n[u])):d.push(n[u]);for(var c=[],l=[],f=0;f<o.length;f++)c.push((0,i.default)(o[f])%10),l.push((0,i.default)(o[f])/10);for(var b=0,h=0,k=0,p=0,v=0,g=0;g<s.length;g++)b+=(0,i.default)(s[g]);for(var m=0;m<d.length;m++)h+=(0,i.default)(d[m]);for(var w=0;w<c.length;w++)k+=(0,i.default)(c[w]),p+=(0,i.default)(l[w]);v=(0,i.default)(b)+(0,i.default)(h)+(0,i.default)(k)+(0,i.default)(p);var x=(0,i.default)(v)%10==0?10:(0,i.default)(v)%10,y=10-x;return e==y},checkIdcard:function(t){if(t=t.toUpperCase(),!/(^\d{15}$)|(^\d{17}([0-9]|X)$)/.test(t))return!1;var e,a;if(e=t.length,15==e){a=new RegExp(/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/);var n=t.match(a),i=new Date("19"+n[2]+"/"+n[3]+"/"+n[4]);if(d=i.getFullYear()==Number(n[2])&&i.getMonth()+1==Number(n[3])&&i.getDate()==Number(n[4]),d){var r=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),s=new Array("1","0","X","9","8","7","6","5","4","3","2"),o=0;for(t=t.substr(0,6)+"19"+t.substr(6,t.length-6),c=0;c<17;c++)o+=t.substr(c,1)*r[c];return t+=s[o%11],!0}return!1}if(18==e){a=new RegExp(/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/);var d;n=t.match(a),i=new Date(n[2]+"/"+n[3]+"/"+n[4]);if(d=i.getFullYear()==Number(n[2])&&i.getMonth()+1==Number(n[3])&&i.getDate()==Number(n[4]),d){var u,c;r=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),s=new Array("1","0","X","9","8","7","6","5","4","3","2"),o=0;for(c=0;c<17;c++)o+=t.substr(c,1)*r[c];return u=s[o%11],u==t.substr(17,1)}return!1}return!1}}});e.default=r},"304a":function(t,e,a){"use strict";a.r(e);var n=a("2569"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);e["default"]=i.a},5694:function(t,e,a){"use strict";var n=a("f86d"),i=a.n(n);i.a},"610c":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */uni-page-body[data-v-4984d84a]{width:100%;height:100%;background:#f4f4f4}.m-t[data-v-4984d84a]{border-top:%?1?% solid #e4e7ed}.row[data-v-4984d84a]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;position:relative;padding:0 %?40?%;height:%?110?%;background:#fff}.row .tit[data-v-4984d84a]{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:%?185?%;font-size:%?28?%;color:#323232}.row uni-picker[data-v-4984d84a]{float:right;text-align:right;position:absolute;right:%?40?%}.row .input[data-v-4984d84a]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;font-size:%?28?%;color:#323232!important;text-align:right}.row .placeholder[data-v-4984d84a]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;font-size:%?28?%;color:#ccc;text-align:right}.add-btn[data-v-4984d84a]{position:fixed;left:%?40?%;right:%?40?%;bottom:%?60?%;z-index:95;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:%?670?%;height:%?80?%;font-size:%?28?%;color:#fff;background-color:#008ab0;border-radius:%?10?%}body.?%PAGE?%[data-v-4984d84a]{background:#f4f4f4}',""])},c9e6:function(t,e,a){"use strict";a.r(e);var n=a("f03f"),i=a("304a");for(var r in i)"default"!==r&&function(t){a.d(e,t,function(){return i[t]})}(r);a("5694");var s=a("2877"),o=Object(s["a"])(i["default"],n["a"],n["b"],!1,null,"4984d84a",null);e["default"]=o.exports},f03f:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"row b-b m-t"},[a("v-uni-text",{staticClass:"tit"},[t._v("银行卡号：")]),a("v-uni-input",{staticClass:"input",attrs:{type:"text",value:t.bankcard,"data-key":"bankcard",placeholder:"请输入银行卡号","placeholder-class":"placeholder"},on:{input:function(e){e=t.$handleEvent(e),t.inputChange(e)}}})],1),a("v-uni-view",{staticClass:"row b-b"},[a("v-uni-text",{staticClass:"tit"},[t._v("开卡行：")]),a("v-uni-picker",{attrs:{value:t.index,range:t.array},on:{change:function(e){e=t.$handleEvent(e),t.bindPickerChange(e)}}},[a("v-uni-text",{class:t.kaika?"input":"placeholder"},[t._v(t._s(t.bank?t.bank:"请选择")+" >")])],1)],1),a("v-uni-view",{staticClass:"row b-b"},[a("v-uni-text",{staticClass:"tit"},[t._v("开卡人：")]),a("v-uni-input",{staticClass:"input",attrs:{type:"text",value:t.bankrealname,"data-key":"bankrealname",placeholder:"请输入开卡人姓名","placeholder-class":"placeholder"},on:{input:function(e){e=t.$handleEvent(e),t.inputChange(e)}}})],1),a("v-uni-view",{staticClass:"row"},[a("v-uni-text",{staticClass:"tit"},[t._v("身份证：")]),a("v-uni-input",{staticClass:"input",attrs:{type:"text",value:t.bankidcard,"data-key":"bankidcard",placeholder:"请输入开卡人身份证号码","placeholder-class":"placeholder"},on:{input:function(e){e=t.$handleEvent(e),t.inputChange(e)}}})],1),a("v-uni-button",{staticClass:"add-btn",on:{click:function(e){e=t.$handleEvent(e),t.confirm(e)}}},[t._v("保存")])],1)},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},f86d:function(t,e,a){var n=a("610c");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("3226987a",n,!0,{sourceMap:!1,shadowMode:!1})}}]);