(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/bank/bindbank"],{"195e":function(e,t,n){},"1d7c":function(e,t,n){"use strict";(function(e){n("7086"),n("921b");a(n("66fd"));var t=a(n("c9e6"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"22a2":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n("2f62");var a={data:function(){return{index:0,bankcard:"",bank:"",bankrealname:"",bankidcard:"",token:"",kaika:!1,memberInfo:[],array:["中国银行","中国农业银行"]}},onShow:function(){if(e.getStorageSync("cbe_token"))this.token=e.getStorageSync("cbe_token"),this.getMemberInfo();else{e.showToast({title:"未登录或无权限",icon:"none"});setTimeout(function(){e.navigateBack({delta:1})},1e3)}},methods:{navTo:function(t){e.navigateTo({url:t})},bindPickerChange:function(e){this.index=e.target.value;var t=e.target.value;this.bank=this.array[t],this.kaika=!0},inputChange:function(e){var t=e.currentTarget.dataset.key;this[t]=e.detail.value},confirm:function(){this.bankcard?this.checkBankno(this.bankcard)?this.bank?this.bankrealname?this.bankidcard?this.checkIdcard(this.bankidcard)?(e.showLoading({title:"正在处理",mask:!0}),e.request({url:e.getStorageSync("hostname")+"?action=index/member/bankPost",data:{bankcard:this.bankcard,bank:this.bank,bankrealname:this.bankrealname,token:this.token,bankidcard:this.bankidcard},method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){e.hideLoading();var n=t.data;if(0==n.code){e.showToast({title:n.msg,icon:"success",mask:!0,duration:3e3});setTimeout(function(){e.navigateBack({delta:1})},2e3)}else e.showToast({title:n.msg,icon:"none"})}})):this.$api.msg("身份证号码格式不正确"):this.$api.msg("请输入开卡人身份证号码"):this.$api.msg("请输入开卡人姓名"):this.$api.msg("请选择开卡行"):this.$api.msg("银行卡号格式不正确"):this.$api.msg("请输入银行卡号")},getMemberInfo:function(){var t=this;e.request({url:e.getStorageSync("hostname")+"?action=index/member/info",data:{token:e.getStorageSync("cbe_token")},method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){var n=e.data;0==n.code&&(t.bankcard=n.one.bankcard,t.bank=n.one.bank,t.bankrealname=n.one.bankrealname,n.one.bankidcard&&(t.kaika=!0,t.bankidcard=n.one.bankidcard))}})},checkBankno:function(e){for(var t=e.substr(e.length-1,1),n=e.substr(0,e.length-1),a=[],r=n.length-1;r>-1;r--)a.push(n.substr(r,1));for(var i=[],s=[],o=[],c=0;c<a.length;c++)(c+1)%2==1?2*parseInt(a[c])<9?i.push(2*parseInt(a[c])):s.push(2*parseInt(a[c])):o.push(a[c]);for(var u=[],d=[],h=0;h<s.length;h++)u.push(parseInt(s[h])%10),d.push(parseInt(s[h])/10);for(var f=0,l=0,b=0,k=0,g=0,m=0;m<i.length;m++)f+=parseInt(i[m]);for(var p=0;p<o.length;p++)l+=parseInt(o[p]);for(var v=0;v<u.length;v++)b+=parseInt(u[v]),k+=parseInt(d[v]);g=parseInt(f)+parseInt(l)+parseInt(b)+parseInt(k);var w=parseInt(g)%10==0?10:parseInt(g)%10,I=10-w;return t==I},checkIdcard:function(e){if(e=e.toUpperCase(),!/(^\d{15}$)|(^\d{17}([0-9]|X)$)/.test(e))return!1;var t,n;if(t=e.length,15==t){n=new RegExp(/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/);var a=e.match(n),r=new Date("19"+a[2]+"/"+a[3]+"/"+a[4]);if(c=r.getFullYear()==Number(a[2])&&r.getMonth()+1==Number(a[3])&&r.getDate()==Number(a[4]),c){var i=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),s=new Array("1","0","X","9","8","7","6","5","4","3","2"),o=0;for(e=e.substr(0,6)+"19"+e.substr(6,e.length-6),d=0;d<17;d++)o+=e.substr(d,1)*i[d];return e+=s[o%11],!0}return!1}if(18==t){n=new RegExp(/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/);var c;a=e.match(n),r=new Date(a[2]+"/"+a[3]+"/"+a[4]);if(c=r.getFullYear()==Number(a[2])&&r.getMonth()+1==Number(a[3])&&r.getDate()==Number(a[4]),c){var u,d;i=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),s=new Array("1","0","X","9","8","7","6","5","4","3","2"),o=0;for(d=0;d<17;d++)o+=e.substr(d,1)*i[d];return u=s[o%11],u==e.substr(17,1)}return!1}return!1}}};t.default=a}).call(this,n("543d")["default"])},"304a":function(e,t,n){"use strict";n.r(t);var a=n("22a2"),r=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,function(){return a[e]})}(i);t["default"]=r.a},"719b":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},r=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r})},c9e6:function(e,t,n){"use strict";n.r(t);var a=n("719b"),r=n("304a");for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);n("e7ed");var s=n("2877"),o=Object(s["a"])(r["default"],a["a"],a["b"],!1,null,null,null);t["default"]=o.exports},e7ed:function(e,t,n){"use strict";var a=n("195e"),r=n.n(a);r.a}},[["1d7c","common/runtime","common/vendor"]]]);