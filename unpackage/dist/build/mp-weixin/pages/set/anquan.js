(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/set/anquan"],{"24b6":function(e,t,n){"use strict";(function(e){n("7086"),n("921b");o(n("66fd"));var t=o(n("3f8c"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"3f8c":function(e,t,n){"use strict";n.r(t);var o=n("b65d"),a=n("df45");for(var i in a)"default"!==i&&function(e){n.d(t,e,function(){return a[e]})}(i);n("65d0");var c=n("2877"),s=Object(c["a"])(a["default"],o["a"],o["b"],!1,null,null,null);t["default"]=s.exports},"48f6":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n("2f62");var o={data:function(){return{mobile:"",phonecode:"",phonetoken:"",logining:!1,token:"",scode:!1,getcode:"获取验证码",memberInfo:[],keywords:"",val:""}},onLoad:function(t){this.keywords=t.keywords,this.val=t.val;var n=e.getStorageSync("cbe_token");if(n)this.getMember();else{e.showToast({title:"未登录或无权限",icon:"none"});setTimeout(function(){e.navigateBack({delta:1})},1e3)}},methods:{inputChange:function(e){var t=e.currentTarget.dataset.key;this[t]=e.detail.value},toNext:function(){var t=this;if(this.logining=!0,!this.phonecode)return e.showToast({title:"手机验证码不能为空",icon:"none"}),this.logining=!1,!1;e.showLoading({title:"正在验证",mask:!0}),e.request({url:e.getStorageSync("hostname")+"?action=index/member/anquanrenzheng",data:{token:e.getStorageSync("cbe_token"),phonecode:this.phonecode,phonetoken:this.phonetoken},method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(n){e.hideLoading();var o=n.data;0==o.code?(e.setStorageSync("cbe_anquan",o.data),e.redirectTo({url:"/pages/set/publish?keywords="+t.keywords+"&val="+t.val})):(e.showToast({title:o.msg,icon:"none"}),t.logining=!1)}})},getMember:function(){var t=this;e.request({url:e.getStorageSync("hostname")+"?action=index/member/info",data:{token:e.getStorageSync("cbe_token")},method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){var n=e.data;0==n.code&&(t.mobile=n.one.mobile,n.one["phone"]=n.one.mobile.substr(0,3)+"****"+n.one.mobile.substr(7),t.memberInfo=n.one)}})},getPhoneCode:function(t){var n=this;if(0==this.scode){var o=/^1[0-9]{10,10}$/;if(o.test(this.mobile)){var a=120;this.scode=!0,this.timer=setInterval(function(){a-=1,"0"==a?(n.getcode="获取验证码",a=120,n.scode=!1,clearInterval(n.timer)):n.getcode="重新获取("+a+"s)"},1e3),e.showLoading({title:"正在获取",mask:!0}),e.request({url:e.getStorageSync("hostname")+"?action=index/common/getphonecode",data:{phone:this.mobile,use:"anquan"},method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){e.hideLoading();var o=t.data;0==o.code?(e.showToast({title:o.msg,icon:"success",mask:!0,duration:3e3}),n.phonetoken=o.token):(e.showToast({title:o.msg,icon:"none"}),n.getcode="获取验证码",a=120,n.scode=!1,clearInterval(n.timer))},fail:function(t){e.showToast({title:"网络连接超时，请检查您的网络",icon:"none"});setTimeout(function(){n.getcode="获取验证码",a=120,n.scode=!1,clearInterval(n.timer)},1e3)}})}else e.showToast({title:"手机号码格式错误",icon:"none"})}}}};t.default=o}).call(this,n("543d")["default"])},"65d0":function(e,t,n){"use strict";var o=n("a970"),a=n.n(o);a.a},a970:function(e,t,n){},b65d:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c},a=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a})},df45:function(e,t,n){"use strict";n.r(t);var o=n("48f6"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);t["default"]=a.a}},[["24b6","common/runtime","common/vendor"]]]);