(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/youhuiquan/youhuiquan"],{"20bd":function(e,n,t){"use strict";t.r(n);var i=t("8bd3"),a=t.n(i);for(var o in i)"default"!==o&&function(e){t.d(n,e,function(){return i[e]})}(o);n["default"]=a.a},"24a4":function(e,n,t){"use strict";t.r(n);var i=t("2ff2"),a=t("20bd");for(var o in a)"default"!==o&&function(e){t.d(n,e,function(){return a[e]})}(o);t("36e8");var u=t("2877"),c=Object(u["a"])(a["default"],i["a"],i["b"],!1,null,null,null);n["default"]=c.exports},"2ff2":function(e,n,t){"use strict";var i=function(){var e=this,n=e.$createElement;e._self._c},a=[];t.d(n,"a",function(){return i}),t.d(n,"b",function(){return a})},"36e8":function(e,n,t){"use strict";var i=t("722c"),a=t.n(i);a.a},6054:function(e,n,t){"use strict";(function(e){t("7086"),t("921b");i(t("66fd"));var n=i(t("24a4"));function i(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("543d")["createPage"])},"722c":function(e,n,t){},"8bd3":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t={data:function(){return{index:0,source:0,xlist:[],checkid:0,indexa:0,weiyong:0,yiyong:0,shixiao:0,cuoponList:[],id:"207",money:200,keyong:0,bukeyong:0,yhqid:"0"}},onLoad:function(n){if(n.source?(this.source=n.source,this.$api.prePage()&&this.$api.prePage().youhuiquanData.id&&(this.checkid=this.$api.prePage().youhuiquanData.id,this.xlist=this.$api.prePage().youhuiquanData),e.setNavigationBarTitle({title:"选择优惠券"}),this.yhqid=n.yhqid):e.setNavigationBarTitle({title:"我的优惠券"}),e.getStorageSync("cbe_token"))this.token=e.getStorageSync("cbe_token"),this.getYouhuiquanList();else{e.showToast({title:"未登录或无权限",icon:"none"});setTimeout(function(){e.navigateBack({delta:1})},1e3)}},methods:{getYouhuiquanList:function(){var n=this;e.showLoading({title:"请稍后"});var t=e.getStorageSync("cbe_shijiprice");if("0"==this.source)var i={token:e.getStorageSync("cbe_token")};else i={token:e.getStorageSync("cbe_token"),ids:this.id,money:t};e.request({url:e.getStorageSync("hostname")+"?action=index/member/youhuiquan",data:i,method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){var i=t.data;e.hideLoading(),0==i.code&&(n.cuoponList=i.list,"0"==n.source?(n.weiyong=i.weiyong,n.yiyong=i.yiyong,n.shixiao=i.shixiao):(n.keyong=i.keyong,n.bukeyong=i.bukeyong),e.removeStorageSync("cbe_shijiprice"))},fail:function(e){n.getYouhuiquanList()}})},toUse:function(n){e.navigateTo({url:"/pages/product/list?yhqid="+n})},changeIndex:function(e){this.index=e},changeIndexa:function(e){this.indexa=e},xuanze:function(n){if(n.id==this.yhqid)return this.quxiaoxuan(),!1;0==n.backtype&&(n.couponname=n.couponname+",立减"+n.deduct+"元"),1==n.backtype&&(n.couponname=n.couponname+",立享"+n.discount+"折优惠"),2==n.backtype&&n.backmoney>0&&(n.couponname=n.couponname+",立返"+n.backmoney+"余额"),2==n.backtype&&n.backcredit>0&&(n.couponname=n.couponname+",立返"+n.backcredit+"积分"),2==n.backtype&&n.backredpack>0&&(n.couponname=n.couponname+",立返"+n.backredpack+"现金"),this.sji().youhuiquanData=n,this.sji().ckyh(n),e.navigateBack({delta:1})},quxiaoxuan:function(){this.sji().youhuiquanData={couponname:""},this.sji().ckyh(""),e.navigateBack({delta:1})},sji:function(){var e=getCurrentPages(),n=e[e.length-2];return n.$vm}}};n.default=t}).call(this,t("543d")["default"])}},[["6054","common/runtime","common/vendor"]]]);