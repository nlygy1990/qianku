(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/public/bindCn"],{8529:function(n,t,e){},"944f":function(n,t,e){"use strict";e.r(t);var c=e("c561"),o=e("b8ca");for(var a in o)"default"!==a&&function(n){e.d(t,n,function(){return o[n]})}(a);e("d5ef");var i=e("2877"),u=Object(i["a"])(o["default"],c["a"],c["b"],!1,null,null,null);t["default"]=u.exports},b8ca:function(n,t,e){"use strict";e.r(t);var c=e("ec67"),o=e.n(c);for(var a in c)"default"!==a&&function(n){e.d(t,n,function(){return c[n]})}(a);t["default"]=o.a},c561:function(n,t,e){"use strict";var c=function(){var n=this,t=n.$createElement;n._self._c},o=[];e.d(t,"a",function(){return c}),e.d(t,"b",function(){return o})},c891:function(n,t,e){"use strict";(function(n){e("7086"),e("921b");c(e("66fd"));var t=c(e("944f"));function c(n){return n&&n.__esModule?n:{default:n}}n(t.default)}).call(this,e("543d")["createPage"])},d5ef:function(n,t,e){"use strict";var c=e("8529"),o=e.n(c);o.a},ec67:function(n,t,e){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=e("2f62");function o(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},c=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(c=c.concat(Object.getOwnPropertySymbols(e).filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),c.forEach(function(t){a(n,t,e[t])})}return n}function a(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var i={data:function(){return{cuowu:"",cnnumber:"",cnpwd:"",logining:!1,showPassword:!0,realname:"",token:"",keyong:0,checked:!1,callback:""}},onLoad:function(n){n.callback&&(this.callback=n.callback)},onShow:function(){var t=n.getStorageSync("cbe_token");if(t)this.token=t;else{n.showToast({title:"未登录或无权限",icon:"none"});setTimeout(function(){n.navigateBack({delta:1})},1e3)}},methods:o({},(0,c.mapMutations)(["bindCn","login"]),{inputChange:function(n){this.cuowu="",this.keyong=0;var t=n.currentTarget.dataset.key;this[t]=n.detail.value},changePassword:function(){this.showPassword=!this.showPassword},changexy:function(){this.checked=!this.checked},quxiao:function(){this.callback?n.navigateBack({delta:1}):n.switchTab({url:"../user/user"})},inputChangm:function(t){var e=this;this.cuowu="",this.realname="",this.cnpwd="";var c=t.detail.value;this.cnnumber=c,c.length<=8?this.keyong=0:n.request({url:n.getStorageSync("hostname")+"?action=index/login/checkbdcn",data:{cnnumber:c},method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(n){var t=n.data;0==t.code?e.keyong=1:e.keyong=2}})},checkcn:function(){var t=this;return!!this.cnnumber&&(!!this.cnpwd&&void n.request({url:n.getStorageSync("hostname")+"?action=index/login/checkcn",data:{cnnumber:this.cnnumber,cnpwd:this.cnpwd},method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(n){var e=n.data;0==e.code?(t.cuowu="",t.realname=e.realname):t.cuowu=e.msg}}))},toNext:function(){var t=this,e=this;return this.logining=!0,this.cnnumber?this.cnpwd?this.checked?(n.showLoading({title:"正在绑定",mask:!0}),void n.request({url:n.getStorageSync("hostname")+"?action=index/login/bindcn",data:{cnnumber:this.cnnumber,cnpwd:this.cnpwd,token:this.token},method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(c){n.hideLoading();var o=c.data;if(0==o.code)if(t.cuowu="",n.showToast({title:o.msg,icon:"success",mask:!0,duration:3e3}),e.callback)setTimeout(function(){n.navigateBack({delta:1})},2e3);else{t.login(o.data);setTimeout(function(){n.switchTab({url:"../user/user"})},2e3)}else t.cuowu=o.msg,t.logining=!1}})):(n.showToast({title:"绑定CN号需同意《用户协议》",icon:"none"}),this.logining=!1,!1):(n.showToast({title:"请填写CN号密码",icon:"none"}),this.logining=!1,!1):(n.showToast({title:"请填写CN号",icon:"none"}),this.logining=!1,!1)}})};t.default=i}).call(this,e("543d")["default"])}},[["c891","common/runtime","common/vendor"]]]);