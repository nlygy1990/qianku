(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/createOrder"],{"1de4":function(t,e,n){"use strict";n.r(e);var a=n("32d5"),o=n("56b6");for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);n("5b8e");var r=n("2877"),u=Object(r["a"])(o["default"],a["a"],a["b"],!1,null,null,null);e["default"]=u.exports},"32d5":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o})},"3c30":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"0e67"))},o={components:{uniPopup:a},data:function(){return{type:"",kjshuoming:"",smheight:"",maskState:0,desc:"",payType:1,addressData:[],goumaiData:[],youhuiquanData:{couponname:""},goodsData:[],priceData:[],manjian:[],shijiprice:0}},onLoad:function(e){var n=t.getSystemInfoSync(),a=n.windowHeight;this.smheight="max-height:"+(a-60)+"px";var o=t.getStorageSync("cbe_token");if(o)this.getProduct(""),this.getMembers();else{t.showToast({title:"未登录或无权限",icon:"none"});setTimeout(function(){t.navigateBack({delta:1})},1e3)}},onShow:function(){console.log(this.youhuiquanData)},methods:{ckyh:function(t){var e="";0==t.backtype?e=t.deduct:1==t.backtype&&(e=(this.priceData.price-t.discount/10*this.priceData.price).toFixed(2)),this.getProduct(e)},getProduct:function(e){var n=this,a=t.getStorageSync("buyarr");t.request({url:t.getStorageSync("hostname")+"?action=index/product/getProduct",data:{datas:JSON.stringify(a),token:t.getStorageSync("cbe_token"),jian:e},method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){n.goodsData=t.data.list,n.priceData=t.data.one,n.manjian=t.data.manjian,0==n.shijiprice&&(n.shijiprice=t.data.one.price)}})},getMembers:function(){var e=this;t.request({url:t.getStorageSync("hostname")+"?action=index/member/getAddressMoren",data:{token:t.getStorageSync("cbe_token")},method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(n){t.hideLoading();var a=n.data;0==a.code&&(e.addressData=a.one,e.goumaiData=a.two,e.kjshuoming=a.three.content)}})},navTo:function(e){t.navigateTo({url:e})},toggleMask:function(e){t.setStorageSync("cbe_shijiprice",this.shijiprice),e.id?t.navigateTo({url:"/pages/youhuiquan/youhuiquan?source=1&yhqid="+e.id}):t.navigateTo({url:"/pages/youhuiquan/youhuiquan?source=1"})},numberChange:function(t){this.number=t.number},changePayType:function(t){this.payType=t},submit:function(){var e=this;if(!this.addressData.realname)return t.showToast({title:"请选择收货地址",icon:"none"}),!1;if(!this.goumaiData.realname)return t.showToast({title:"请选择购买人",icon:"none"}),!1;t.showLoading({title:"正在生成订单",mask:!0});var n=JSON.stringify(this.addressData),a=JSON.stringify(this.goumaiData),o=(t.getStorageSync("buyarr"),JSON.stringify(this.goodsData)),i=JSON.stringify(this.priceData),r=JSON.stringify(this.youhuiquanData),u="wxapp";t.request({url:t.getStorageSync("hostname")+"?action=index/order/addorder",data:{address:n,goumairen:a,goods:o,price:i,youhuiquan:r,token:t.getStorageSync("cbe_token"),order_from:u},method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(n){t.hideLoading();var a=n.data;0==a.code?(t.showToast({title:a.msg,icon:"success",mask:!0,duration:3e3}),t.redirectTo({url:"/pages/money/pay?ordersn="+a.ordersn}),e.quxiao(a.ordersn,a.uid)):t.showToast({title:a.msg,icon:"none"})},fail:function(e){t.hideLoading()}})},quxiao:function(e,n){t.request({url:t.getStorageSync("hostname")+"?action=index/order/jihua_quxiao",data:{ordersn:e,uid:n},method:"POST",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){},fail:function(t){}})},togglePopup:function(t){this.type=t},shuifeishuoming:function(){this.togglePopup("middle-list")},stopPrevent:function(){}}};e.default=o}).call(this,n("543d")["default"])},"3e95":function(t,e,n){"use strict";(function(t){n("7086"),n("921b");a(n("66fd"));var e=a(n("1de4"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"56b6":function(t,e,n){"use strict";n.r(e);var a=n("3c30"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e["default"]=o.a},"5b8e":function(t,e,n){"use strict";var a=n("cf33"),o=n.n(a);o.a},cf33:function(t,e,n){}},[["3e95","common/runtime","common/vendor"]]]);